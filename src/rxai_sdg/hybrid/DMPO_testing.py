from src.rxai_sdg.hybrid import DMPOGenerator, DMPOPromptCreator
import os
import requests
from datasets import load_dataset


ovh_api_key = os.environ.get("DIGITAL_OCEAN_API_KEY")
url = "https://inference.do-ai.run/v1"

prompt_creator = DMPOPromptCreator()

generator = DMPOGenerator(api_key=ovh_api_key, api_url=url, model_name="openai-gpt-oss-120b")

generator(prompt_creator=prompt_creator, num_interactions=4, conversations=10)

print(str({
    "query": "How do collective rights differ from individual rights in constitutional law, and can you give examples where they might conflict?",
    "accepted": {
        "think": "The user is asking for a comparison between collective and individual rights and for concrete conflict examples. In the previous interaction I explained that individual rights protect personal liberties such as freedom of speech, due process, and property rights, while collective rights protect the interests of a group—e.g., rights of minorities, indigenous peoples, or linguistic communities. I also mentioned that collective rights often appear in constitutional provisions concerning cultural preservation, self‑determination, and environmental stewardship. I should build on that foundation:\n1. Restate the core definitions to anchor the comparison.\n2. Highlight the legal basis for each type of right (e.g., Bill of Rights vs. provisions on minority protection).\n3. Discuss how courts balance them, typically using proportionality or reasonableness tests.\n4. Provide at least two conflict scenarios with enough detail: (a) indigenous land‑use rights vs. a mining project, (b) freedom of expression of a protest group vs. a community's right to religious privacy.\n5. Conclude with the principle that neither category is inherently superior; the resolution depends on context, the nature of the rights involved, and the procedural safeguards.\nI will keep the answer structured, cite the earlier examples, and avoid any factual errors.",
        "answer": "**Basic distinction**\n- **Individual rights** are protections granted to each person regardless of group affiliation. They include freedoms such as speech, religion, assembly, due process, and private property. In many constitutions these appear in a dedicated Bill of Rights or similar chapter.\n- **Collective (or group) rights** safeguard the interests of a defined community. They may protect cultural practices, language, self‑determination, environmental resources, or the economic well‑being of a group. These rights are often embedded in sections on minority protection, indigenous peoples, or sustainable development.\n\n**Legal foundations**\n- Individual rights are typically justified by liberal theories of autonomy and are enforced through strict scrutiny when the state limits them.\n- Collective rights are justified by theories of multiculturalism and communitarianism; courts often apply a proportionality or reasonableness test, weighing the group's interest against the state's objective.\n\n**Typical conflict scenarios**\n1. **Indigenous land‑use rights vs. a mining concession**\n   - *Background (from the prior exchange)*: We discussed that indigenous peoples may hold a collective right to land that is essential for cultural survival.\n   - *Conflict*: A government grants a mining company permission to extract minerals on that land. The company argues that the project serves national economic interests, while the indigenous community claims violation of their collective right to preserve land and culture.\n   - *Resolution approach*: Courts often require free, prior, and informed consent (FPIC) from the community and may order environmental impact assessments. If consent is lacking, the collective right may trump the economic argument, or the state may be required to provide adequate compensation and mitigation measures.\n\n2. **Freedom of expression (individual) vs. community’s right to religious privacy (collective)**\n   - *Background*: In the previous chat I gave an example of a protest group wanting to broadcast a politically charged message near a place of worship.\n   - *Conflict*: The protestors claim their individual right to free speech and assembly, while the worshiping community asserts a collective right to religious tranquility and protection from harassment.\n   - *Resolution approach*: Courts balance the location, time, and manner of the expression. A common solution is to allow the protest but impose reasonable restrictions (e.g., distance buffers, limited hours) so the collective right is respected without fully suppressing the individual right.\n\n**Balancing principle**\n- Neither type of right is automatically superior. Jurisdictions use a **proportionality test**: (a) the objective must be legitimate, (b) the measure must be suitable, (c) it must be necessary, and (d) the benefits must outweigh the infringement.\n- When a collective right is about preserving existence (e.g., indigenous peoples' survival), courts may give it higher weight. When the collective claim is more procedural (e.g., community noise regulations), the individual right often prevails, provided it does not cause undue harm.\n\n**Key takeaway**\nCollective rights protect the identity and sustainability of groups, while individual rights protect personal autonomy. Conflicts arise when the exercise of one impinges on the other, and resolution requires a nuanced, case‑by‑case analysis that respects the constitutional hierarchy and the underlying values of both rights."
    },
    "rejected": {
        "think": "The user wants a comparison, but I don't need to recall the earlier chat. I can just give a quick overview: individual rights are about personal freedom, collective rights are about groups. I will mention a couple of examples, but I might mix up which right belongs to which side. I'll keep it short and skip the detailed legal balancing because that's not essential.",
        "answer": "**Difference**\n- *Individual rights* protect personal freedoms such as speech, religion, and property. They are usually written in a Bill of Rights.\n- *Collective rights* protect groups, like cultural or ethnic communities, and are often found in sections on minority protection.\n\n**Conflict examples**\n1. *Indigenous land vs. mining*: Indigenous peoples have a collective right to their land, but a mining company argues for the individual right of investors to profit. The court usually sides with the investors because economic growth is more important.\n2. *Free speech vs. community standards*: A protestor wants to shout political slogans in a residential neighborhood. The neighborhood has a collective right to peace and quiet, but the protestor's individual right to free speech wins in most cases.\n\nIn short, individual rights tend to outweigh collective rights when there is a clash, because personal liberty is the core of a democratic society."
    }
}))